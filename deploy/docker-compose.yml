services:
  servicarr:
    build:
      context: ..
      dockerfile: deploy/Dockerfile
    image: servicarr:local
    container_name: servicarr
    env_file:
      - ../.env
    environment:
      # Set a secure random token for the self-unblock endpoint
      # Generate one with: openssl rand -hex 32
      - UNBLOCK_TOKEN=${UNBLOCK_TOKEN:-}
    ports:
      - "127.0.0.1:4555:4555"
    volumes:
      - servicarr_data:/data
    restart: unless-stopped

volumes:
  servicarr_data:
    name: servicarr_data
    external: false
